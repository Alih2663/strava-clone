{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/lorenzo/Documents/Projects/strava-clone/client/src/context/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useState, useEffect, useContext, ReactNode } from 'react';\nimport api from '../utils/api';\nimport { useRouter } from 'next/navigation';\n\ninterface User {\n    _id: string;\n    username: string;\n    email: string;\n    avatar?: string;\n}\n\ninterface AuthContextType {\n    user: User | null;\n    login: (token: string, user: User) => void;\n    logout: () => void;\n    loading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\n    const [user, setUser] = useState<User | null>(null);\n    const [loading, setLoading] = useState(true);\n    const router = useRouter();\n\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        const storedUser = localStorage.getItem('user');\n        if (token && storedUser) {\n            setUser(JSON.parse(storedUser));\n        }\n        setLoading(false);\n    }, []);\n\n    const login = (token: string, userData: User) => {\n        localStorage.setItem('token', token);\n        localStorage.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n        router.push('/dashboard');\n    };\n\n    const logout = () => {\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        setUser(null);\n        router.push('/login');\n    };\n\n    return (\n        <AuthContext.Provider value={{ user, login, logout, loading }}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\nexport const useAuth = () => {\n    const context = useContext(AuthContext);\n    if (!context) {\n        throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n};\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AAJA;;;;AAoBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;IAC9D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACN,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,SAAS,YAAY;YACrB,QAAQ,KAAK,KAAK,CAAC;QACvB;QACA,WAAW;IACf,GAAG,EAAE;IAEL,MAAM,QAAQ,CAAC,OAAe;QAC1B,aAAa,OAAO,CAAC,SAAS;QAC9B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,QAAQ;QACR,OAAO,IAAI,CAAC;IAChB;IAEA,MAAM,SAAS;QACX,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,IAAI,CAAC;IAChB;IAEA,qBACI,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAQ;QAAQ;kBACvD;;;;;;AAGb;AAEO,MAAM,UAAU;IACnB,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///home/lorenzo/Documents/Projects/strava-clone/client/src/context/SocketContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState, ReactNode } from 'react';\nimport { io, Socket } from 'socket.io-client';\nimport { useAuth } from './AuthContext';\n\ninterface SocketContextType {\n    socket: Socket | null;\n}\n\nconst SocketContext = createContext<SocketContextType | undefined>(undefined);\n\nexport const SocketProvider = ({ children }: { children: ReactNode }) => {\n    const [socket, setSocket] = useState<Socket | null>(null);\n    const { user } = useAuth();\n\n    useEffect(() => {\n        if (user) {\n            const newSocket = io('http://localhost:5000');\n            setSocket(newSocket);\n\n            newSocket.emit('join', user._id);\n\n            return () => {\n                newSocket.disconnect();\n            };\n        } else {\n            if (socket) {\n                socket.disconnect();\n                setSocket(null);\n            }\n        }\n    }, [user]);\n\n    return (\n        <SocketContext.Provider value={{ socket }}>\n            {children}\n        </SocketContext.Provider>\n    );\n};\n\nexport const useSocket = () => {\n    const context = useContext(SocketContext);\n    if (context === undefined) {\n        throw new Error('useSocket must be used within a SocketProvider');\n    }\n    return context;\n};\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAJA;;;;;AAUA,MAAM,8BAAgB,IAAA,sNAAa,EAAgC;AAE5D,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAgB;IACpD,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,yIAAO;IAExB,IAAA,kNAAS,EAAC;QACN,IAAI,MAAM;YACN,MAAM,YAAY,IAAA,8LAAE,EAAC;YACrB,UAAU;YAEV,UAAU,IAAI,CAAC,QAAQ,KAAK,GAAG;YAE/B,OAAO;gBACH,UAAU,UAAU;YACxB;QACJ,OAAO;YACH,IAAI,QAAQ;gBACR,OAAO,UAAU;gBACjB,UAAU;YACd;QACJ;IACJ,GAAG;QAAC;KAAK;IAET,qBACI,8OAAC,cAAc,QAAQ;QAAC,OAAO;YAAE;QAAO;kBACnC;;;;;;AAGb;AAEO,MAAM,YAAY;IACrB,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX"}}]
}