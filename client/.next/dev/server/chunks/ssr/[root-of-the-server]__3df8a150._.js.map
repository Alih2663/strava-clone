{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/lorenzo/Documents/Projects/strava-clone/client/src/utils/api.ts"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n    baseURL: 'http://localhost:5000/api',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n});\n\napi.interceptors.request.use(\n    (config) => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            config.headers.Authorization = `Bearer ${token}`;\n        }\n        return config;\n    },\n    (error) => Promise.reject(error)\n);\n\nexport default api;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACrB,SAAS;IACT,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CACxB,CAAC;IACG,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACP,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IACpD;IACA,OAAO;AACX,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;uCAGf"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/lorenzo/Documents/Projects/strava-clone/client/src/components/Navbar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useAuth } from '@/context/AuthContext';\nimport { useSocket } from '@/context/SocketContext';\nimport { LogOut, Upload, User, Bell } from 'lucide-react';\nimport { useEffect, useState, useRef } from 'react';\nimport api from '@/utils/api';\nimport { usePathname } from 'next/navigation';\n\ninterface Notification {\n    _id: string;\n    sender: {\n        _id: string;\n        username: string;\n        profilePicture?: string;\n    };\n    type: 'comment' | 'reply' | 'like';\n    activity: {\n        _id: string;\n        title: string;\n    };\n    read: boolean;\n    createdAt: string;\n}\n\nexport default function Navbar() {\n    const { user, logout } = useAuth();\n    const pathname = usePathname();\n    const [requestCount, setRequestCount] = useState(0);\n    const [notifications, setNotifications] = useState<Notification[]>([]);\n    const [unreadCount, setUnreadCount] = useState(0);\n    const [showNotifications, setShowNotifications] = useState(false);\n    const [animateBadge, setAnimateBadge] = useState(false);\n    const dropdownRef = useRef<HTMLDivElement>(null);\n\n    const { socket } = useSocket();\n\n    useEffect(() => {\n        if (user) {\n            fetchData();\n        }\n    }, [user]);\n\n    useEffect(() => {\n        if (socket) {\n            socket.on('notification', (newNotification: Notification) => {\n                setNotifications(prev => [newNotification, ...prev]);\n                setUnreadCount(prev => prev + 1);\n                setAnimateBadge(true);\n                setTimeout(() => setAnimateBadge(false), 1000);\n            });\n\n            socket.on('friend_request', () => {\n                setRequestCount(prev => prev + 1);\n            });\n\n            return () => {\n                socket.off('notification');\n                socket.off('friend_request');\n            };\n        }\n    }, [socket]);\n\n    // Close dropdown when clicking outside\n    useEffect(() => {\n        function handleClickOutside(event: MouseEvent) {\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n                setShowNotifications(false);\n            }\n        }\n        document.addEventListener(\"mousedown\", handleClickOutside);\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n    }, []);\n\n    const fetchData = async () => {\n        try {\n            const [requestsRes, notifRes] = await Promise.all([\n                api.get('/users/friend-requests'),\n                api.get('/notifications')\n            ]);\n            setRequestCount(requestsRes.data.length);\n\n            const newUnreadCount = notifRes.data.unreadCount;\n            if (newUnreadCount > unreadCount) {\n                setAnimateBadge(true);\n                setTimeout(() => setAnimateBadge(false), 1000); // Reset animation\n            }\n            setUnreadCount(newUnreadCount);\n            setNotifications(notifRes.data.notifications);\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    const handleNotificationClick = () => {\n        setShowNotifications(!showNotifications);\n    };\n\n    const handleMarkAllRead = async () => {\n        try {\n            await api.put('/notifications/read');\n            setUnreadCount(0);\n            setNotifications([]);\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    const handleSingleRead = async (id: string, isRead: boolean) => {\n        setShowNotifications(false);\n        if (!isRead) {\n            try {\n                await api.put(`/notifications/${id}/read`);\n                setUnreadCount(prev => Math.max(0, prev - 1));\n                setNotifications(prev => prev.filter(n => n._id !== id));\n            } catch (err) {\n                console.error(err);\n            }\n        }\n    };\n\n    return (\n        <nav className=\"bg-orange-600 text-white p-4 shadow-md relative z-50\">\n            <div className=\"container mx-auto flex justify-between items-center\">\n                <Link href=\"/dashboard\" className=\"text-xl font-bold flex items-center gap-2\">\n                    <img src=\"/logo.png\" alt=\"Logo\" className=\"w-8 h-8\" /> StravaClone\n                </Link>\n                <div className=\"flex items-center gap-6\">\n                    {user ? (\n                        <>\n                            {/* Notifications Dropdown */}\n                            <div className=\"relative\" ref={dropdownRef}>\n                                <button\n                                    onClick={handleNotificationClick}\n                                    className=\"relative hover:text-orange-200 flex items-center\"\n                                >\n                                    <Bell size={20} />\n                                    {unreadCount > 0 && (\n                                        <span className={`absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center ${animateBadge ? 'animate-bounce' : ''}`}>\n                                            {unreadCount}\n                                        </span>\n                                    )}\n                                </button>\n\n                                {showNotifications && (\n                                    <div className=\"absolute right-0 mt-2 w-80 bg-white text-gray-800 rounded-lg shadow-xl border border-gray-200 overflow-hidden\">\n                                        <div className=\"p-3 border-b bg-gray-50 font-semibold flex justify-between items-center\">\n                                            <span>Notifications</span>\n                                            {unreadCount > 0 && (\n                                                <button\n                                                    onClick={handleMarkAllRead}\n                                                    className=\"text-xs text-orange-600 hover:text-orange-800 font-normal\"\n                                                >\n                                                    Mark all read\n                                                </button>\n                                            )}\n                                        </div>\n                                        <div className=\"max-h-96 overflow-y-auto\">\n                                            {notifications.length === 0 ? (\n                                                <div className=\"p-4 text-center text-gray-500 text-sm\">No notifications</div>\n                                            ) : (\n                                                notifications.map(notif => (\n                                                    <div\n                                                        key={notif._id}\n                                                        className={`block p-3 hover:bg-gray-50 border-b last:border-b-0 text-sm ${!notif.read ? 'bg-orange-50 border-l-4 border-l-orange-500' : ''}`}\n                                                    >\n                                                        <Link\n                                                            href={`/profile/${notif.sender._id}`}\n                                                            className=\"font-semibold hover:underline hover:text-orange-600\"\n                                                            onClick={(e) => {\n                                                                e.stopPropagation();\n                                                                setShowNotifications(false);\n                                                            }}\n                                                        >\n                                                            {notif.sender.username}\n                                                        </Link>\n                                                        {' '}\n                                                        <Link\n                                                            href={`/activity/${notif.activity?._id}`}\n                                                            className=\"hover:underline\"\n                                                            onClick={() => handleSingleRead(notif._id, notif.read)}\n                                                        >\n                                                            {notif.type === 'like' ? 'liked' : (notif.type === 'comment' ? 'commented on' : 'replied to your comment on')}\n                                                            {' '}\n                                                            <span className=\"font-medium text-orange-600\">{notif.activity?.title || 'an activity'}</span>\n                                                        </Link>\n                                                    </div>\n                                                ))\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n\n                            <Link href=\"/search\" className=\"hover:text-orange-200\">Find Friends</Link>\n                            <Link href=\"/friends\" className=\"hover:text-orange-200 relative\">\n                                Requests\n                                {requestCount > 0 && (\n                                    <span className=\"absolute -top-2 -right-3 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n                                        {requestCount}\n                                    </span>\n                                )}\n                            </Link>\n\n                            <Link href={`/profile/${user._id}`} className=\"flex items-center gap-2 hover:text-orange-200\">\n                                <User size={20} />\n                                <span>{user.username}</span>\n                            </Link>\n                            <button onClick={logout} className=\"flex items-center gap-1 hover:text-orange-200\">\n                                <LogOut size={20} /> Logout\n                            </button>\n                        </>\n                    ) : (\n                        <Link href=\"/login\" className=\"hover:text-orange-200\">Login</Link>\n                    )}\n                </div>\n            </div>\n\n            {/* Floating Upload Button */}\n            {user && pathname !== '/upload' && (\n                <Link\n                    href=\"/upload\"\n                    className=\"fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-orange-600 text-white p-4 rounded-full shadow-lg hover:bg-orange-700 transition-colors z-50 flex items-center gap-2\"\n                >\n                    <Upload size={24} />\n                    <span className=\"font-bold\">Upload Activity</span>\n                </Link>\n            )}\n        </nav>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 445, "column": 0}, "map": {"version":3,"sources":["file:///home/lorenzo/Documents/Projects/strava-clone/client/src/components/CommentsSection.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport api from '@/utils/api';\nimport { useAuth } from '@/context/AuthContext';\nimport { useSocket } from '@/context/SocketContext';\nimport Link from 'next/link';\n\ninterface Comment {\n    _id: string;\n    user: {\n        _id: string;\n        username: string;\n        profilePicture?: string;\n    };\n    text: string;\n    createdAt: string;\n    parentComment?: string | null;\n}\n\ninterface CommentsSectionProps {\n    activityId: string;\n}\n\nexport default function CommentsSection({ activityId }: CommentsSectionProps) {\n    const [comments, setComments] = useState<Comment[]>([]);\n    const [newComment, setNewComment] = useState('');\n    const [replyText, setReplyText] = useState<{ [key: string]: string }>({});\n    const [replyingTo, setReplyingTo] = useState<string | null>(null);\n    const [showAddComment, setShowAddComment] = useState(false);\n    const [loading, setLoading] = useState(true);\n    const [page, setPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(1);\n    const { user } = useAuth();\n    const { socket } = useSocket(); // Added useSocket hook\n\n    useEffect(() => {\n        fetchComments(); // Removed '1' argument\n    }, [activityId]);\n\n    // New useEffect for socket events\n    useEffect(() => {\n        if (socket && activityId) {\n            socket.on(`activity_${activityId}_comments`, (newComment: Comment) => {\n                // Add the new comment (whether root or reply) to the beginning of the comments array.\n                // The existing rendering logic (rootComments, getReplies) will correctly place it.\n                setComments(prev => {\n                    if (prev.some(c => c._id === newComment._id)) {\n                        return prev;\n                    }\n                    return [newComment, ...prev];\n                });\n            });\n\n            return () => {\n                socket.off(`activity_${activityId}_comments`);\n            };\n        }\n    }, [socket, activityId]);\n\n    const fetchComments = async (pageNum: number = 1) => { // Added default value for pageNum\n        try {\n            const { data } = await api.get(`/activities/${activityId}/comments?page=${pageNum}&limit=10`);\n            if (pageNum === 1) {\n                setComments(data.comments);\n            } else {\n                setComments(prev => [...prev, ...data.comments]);\n            }\n            setTotalPages(data.totalPages);\n            setPage(pageNum);\n        } catch (error) {\n            console.error('Error fetching comments:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const loadMore = () => {\n        if (page < totalPages) {\n            fetchComments(page + 1);\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent, parentId: string | null = null) => {\n        e.preventDefault();\n        const text = parentId ? replyText[parentId] : newComment;\n\n        if (!text || !text.trim()) return;\n\n        try {\n            const { data } = await api.post(`/activities/${activityId}/comments`, {\n                text,\n                parentComment: parentId\n            });\n\n            setComments(prev => {\n                if (prev.some(c => c._id === data._id)) {\n                    return prev;\n                }\n                return [data, ...prev];\n            });\n\n            if (parentId) {\n                setReplyText({ ...replyText, [parentId]: '' });\n                setReplyingTo(null);\n            } else {\n                setNewComment('');\n                setShowAddComment(false);\n            }\n        } catch (error) {\n            console.error('Error adding comment:', error);\n        }\n    };\n\n    const formatDate = (dateString: string) => {\n        const date = new Date(dateString);\n        return date.toLocaleString([], {\n            year: 'numeric',\n            month: 'numeric',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    };\n\n    // Organize comments into threads\n    const rootComments = comments.filter(c => !c.parentComment);\n    const getReplies = (parentId: string) => comments.filter(c => c.parentComment === parentId).sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n\n    if (loading && page === 1) return <div className=\"mt-6 text-gray-500\">Loading comments...</div>;\n\n    return (\n        <div className=\"mt-8 border-t pt-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-bold\">Comments</h2>\n                {user && comments.length > 0 && !showAddComment && (\n                    <button\n                        onClick={() => setShowAddComment(true)}\n                        className=\"text-orange-500 hover:text-orange-600 font-medium\"\n                    >\n                        Add Comment\n                    </button>\n                )}\n            </div>\n\n            {user && showAddComment && (\n                <form onSubmit={(e) => handleSubmit(e)} className=\"mb-6\">\n                    <textarea\n                        className=\"w-full border rounded p-3 focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                        placeholder=\"Add a comment...\"\n                        rows={3}\n                        value={newComment}\n                        onChange={(e) => setNewComment(e.target.value)}\n                    />\n                    <div className=\"flex justify-end gap-2 mt-2\">\n                        {comments.length > 0 && (\n                            <button\n                                type=\"button\"\n                                onClick={() => setShowAddComment(false)}\n                                className=\"px-4 py-2 text-gray-500 hover:text-gray-700\"\n                            >\n                                Cancel\n                            </button>\n                        )}\n                        <button\n                            type=\"submit\"\n                            className=\"bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition-colors\"\n                            disabled={!newComment.trim()}\n                        >\n                            Post Comment\n                        </button>\n                    </div>\n                </form>\n            )}\n\n            <div className=\"space-y-6\">\n                {rootComments.length === 0 && !showAddComment ? (\n                    <div className=\"text-center py-4\">\n                        <p className=\"text-gray-500 mb-2\">No comments yet.</p>\n                        {user && (\n                            <button\n                                onClick={() => setShowAddComment(true)}\n                                className=\"text-orange-500 font-medium\"\n                            >\n                                Be the first to share your thoughts!\n                            </button>\n                        )}\n                    </div>\n                ) : (\n                    <>\n                        {rootComments.map((comment) => (\n                            <div key={comment._id} className=\"bg-gray-50 p-4 rounded-lg\">\n                                {/* Comment Header */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <Link href={`/profile/${comment.user._id}`} className=\"font-semibold text-gray-800 hover:text-orange-600 hover:underline\">\n                                            {comment.user.username}\n                                        </Link>\n                                        <span className=\"text-xs text-gray-500\">\n                                            {formatDate(comment.createdAt)}\n                                        </span>\n                                    </div>\n                                </div>\n\n                                {/* Comment Body */}\n                                <p className=\"text-gray-700 mb-3\">{comment.text}</p>\n\n                                {/* Reply Button */}\n                                {user && (\n                                    <button\n                                        onClick={() => setReplyingTo(replyingTo === comment._id ? null : comment._id)}\n                                        className=\"text-sm text-gray-500 hover:text-orange-500 font-medium mb-2\"\n                                    >\n                                        Reply\n                                    </button>\n                                )}\n\n                                {/* Reply Form */}\n                                {replyingTo === comment._id && (\n                                    <form onSubmit={(e) => handleSubmit(e, comment._id)} className=\"mt-2 mb-4 ml-4\">\n                                        <textarea\n                                            className=\"w-full border rounded p-2 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500\"\n                                            placeholder={`Reply to ${comment.user.username}...`}\n                                            rows={2}\n                                            value={replyText[comment._id] || ''}\n                                            onChange={(e) => setReplyText({ ...replyText, [comment._id]: e.target.value })}\n                                        />\n                                        <div className=\"flex justify-end gap-2 mt-1\">\n                                            <button\n                                                type=\"button\"\n                                                onClick={() => setReplyingTo(null)}\n                                                className=\"text-xs text-gray-500 hover:text-gray-700\"\n                                            >\n                                                Cancel\n                                            </button>\n                                            <button\n                                                type=\"submit\"\n                                                className=\"bg-orange-500 text-white px-3 py-1 text-xs rounded hover:bg-orange-600\"\n                                                disabled={!replyText[comment._id]?.trim()}\n                                            >\n                                                Reply\n                                            </button>\n                                        </div>\n                                    </form>\n                                )}\n\n                                {/* Replies List */}\n                                {getReplies(comment._id).length > 0 && (\n                                    <div className=\"ml-6 mt-3 space-y-3 border-l-2 border-gray-200 pl-4\">\n                                        {getReplies(comment._id).map((reply) => (\n                                            <div key={reply._id}>\n                                                <div className=\"flex items-center gap-2 mb-1\">\n                                                    <Link href={`/profile/${reply.user._id}`} className=\"font-semibold text-sm text-gray-800 hover:text-orange-600 hover:underline\">\n                                                        {reply.user.username}\n                                                    </Link>\n                                                    <span className=\"text-xs text-gray-500\">\n                                                        {formatDate(reply.createdAt)}\n                                                    </span>\n                                                </div>\n                                                <p className=\"text-sm text-gray-700\">{reply.text}</p>\n                                            </div>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n                        ))}\n\n                        {page < totalPages && (\n                            <div className=\"flex justify-center mt-4\">\n                                <button\n                                    onClick={loadMore}\n                                    className=\"flex items-center gap-1 text-orange-500 hover:text-orange-600 font-medium transition-colors\"\n                                >\n                                    <span>Load more comments</span>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                                        <path d=\"m6 9 6 6 6-6\" />\n                                    </svg>\n                                </button>\n                            </div>\n                        )}\n                    </>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 911, "column": 0}, "map": {"version":3,"sources":["file:///home/lorenzo/Documents/Projects/strava-clone/client/src/app/activity/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport api from '@/utils/api';\nimport Navbar from '@/components/Navbar';\nimport dynamic from 'next/dynamic';\nimport { useParams, useRouter } from 'next/navigation';\nimport { Heart } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useSocket } from '@/context/SocketContext';\n\n// Dynamically import Map to avoid SSR issues\nconst Map = dynamic(() => import('@/components/Map'), { ssr: false });\nimport CommentsSection from '@/components/CommentsSection';\n\ninterface Activity {\n    _id: string;\n    title: string;\n    description: string;\n    sportType: string;\n    location: {\n        coordinates: [number, number, number][]; // [lng, lat, ele]\n    };\n    stats: {\n        distance: number;\n        duration: number;\n        elevationGain: number;\n    };\n    user: {\n        username: string;\n    };\n    likes: string[];\n}\n\nexport default function ActivityPage() {\n    const { id } = useParams();\n    const { user, loading: authLoading } = useAuth();\n    const router = useRouter();\n    const [activity, setActivity] = useState<Activity | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [isLiked, setIsLiked] = useState(false);\n    const [likeCount, setLikeCount] = useState(0);\n\n    const { socket } = useSocket();\n\n    useEffect(() => {\n        if (!authLoading && !user) {\n            router.push('/login');\n            return;\n        }\n\n        const fetchActivity = async () => {\n            if (authLoading || !user) return;\n\n            try {\n                const { data } = await api.get(`/activities/${id}`);\n                setActivity(data);\n                setLikeCount(data.likes.length);\n                setIsLiked(data.likes.includes(user._id));\n            } catch (error) {\n                console.error('Error fetching activity:', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        if (id) fetchActivity();\n    }, [id, user, authLoading, router]);\n\n    useEffect(() => {\n        if (socket && id) {\n            socket.on(`activity_${id}_likes`, (data: { count: number, likes: string[] }) => {\n                setLikeCount(data.count);\n                if (user) {\n                    setIsLiked(data.likes.includes(user._id));\n                }\n            });\n\n            return () => {\n                socket.off(`activity_${id}_likes`);\n            };\n        }\n    }, [socket, id, user]);\n\n    const handleToggleLike = async () => {\n        if (!activity) return;\n        try {\n            const { data } = await api.post(`/likes/${activity._id}`);\n            setIsLiked(data.liked);\n        } catch (error) {\n            console.error('Error toggling like:', error);\n        }\n    };\n\n    if (loading) return <div>Loading...</div>;\n    if (!activity) return <div>Activity not found</div>;\n\n    // Convert GeoJSON [lng, lat] to Leaflet [lat, lng]\n    const mapCoordinates = activity.location.coordinates.map(coord => [coord[1], coord[0]] as [number, number]);\n\n    return (\n        <div className=\"min-h-screen bg-gray-100 pb-32\">\n            <Navbar />\n            <div className=\"container mx-auto p-4 max-w-4xl\">\n                <div className=\"bg-white p-6 rounded-lg shadow-md mt-6\">\n                    <h1 className=\"text-3xl font-bold mb-2\">{activity.title}</h1>\n                    <p className=\"text-gray-600 mb-4\">{activity.description}</p>\n\n                    <div className=\"grid grid-cols-3 gap-4 mb-6 text-center\">\n                        <div className=\"bg-gray-50 p-4 rounded\">\n                            <p className=\"text-gray-500 text-sm\">Distance</p>\n                            <p className=\"text-xl font-bold\">{(activity.stats.distance / 1000).toFixed(2)} km</p>\n                        </div>\n                        <div className=\"bg-gray-50 p-4 rounded\">\n                            <p className=\"text-gray-500 text-sm\">Duration</p>\n                            <p className=\"text-xl font-bold\">{Math.floor(activity.stats.duration / 60)} min</p>\n                        </div>\n                        <div className=\"bg-gray-50 p-4 rounded\">\n                            <p className=\"text-gray-500 text-sm\">Elevation</p>\n                            <p className=\"text-xl font-bold\">{activity.stats.elevationGain} m</p>\n                        </div>\n                    </div>\n\n                    <div className=\"rounded-lg overflow-hidden border mb-4\">\n                        <Map coordinates={mapCoordinates} />\n                    </div>\n\n                    {/* Likes Section */}\n                    <div className=\"flex items-center gap-2 mb-6\">\n                        <button\n                            onClick={handleToggleLike}\n                            className={`flex items-center gap-2 transition-colors ${isLiked ? 'text-red-500' : 'text-gray-500 hover:text-red-500'}`}\n                        >\n                            <Heart size={28} fill={isLiked ? \"currentColor\" : \"none\"} />\n                        </button>\n                        <span className=\"text-lg font-semibold\">{likeCount} likes</span>\n                    </div>\n\n                    <CommentsSection activityId={activity._id} />\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}